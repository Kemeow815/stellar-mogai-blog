<script>
  window.addEventListener("DOMContentLoaded", (event) => {
    window.searchConfig = {
      appId: "<%- conf.appId %>",
      apiKey: "<%- conf.apiKey %>",
      indexName: "<%- conf.indexName %>",
      hitsPerPage: 100,
    };

    function loadScript(src) {
      return new Promise((resolve, reject) => {
        const script = document.createElement("script");
        script.src = src;
        script.defer = true;
        script.onload = resolve;
        script.onerror = reject;
        document.body.appendChild(script);
      });
    }

    loadScript(
      "https://gcore.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"
    )
      .then(() => utils.js("/js/search/algolia-search.js", { defer: true }))
      .catch((error) => console.error("Failed to load script:", error));
  });
</script>
